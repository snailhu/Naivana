 已确定：
1，Service层的方法是URL级别的用户权限无关的，Service层感觉不到此时登录的用户是谁。
2，有关数据粒度的权限，Service层会进行控制，此时需要传入调用者ID。
3，业务员的业绩版统计用quartz设定为定时任务，日统计每天凌晨2点进行。月统计每月一号进行。
4，保证Transaction传播到Service层为止。
5，无法解决的Exception统一抛到Controller层使用spring MVC的Exception处理机制统一处理。(使用RuntimeException)。
6，下个项目使用log4j。
7，目前使用ehcache的集群同步+jBoss的session同步/将来使用{memcached}。

未解决：
1，Exception抛出问题。在哪一层抛出？（解决。）
2，操作流水号表的天数的操作是否也使用定时任务？（否,在订单service里进行。）

----------------------------------------------------------------------------------
几个问题:
1,按时间查看促销信息是按发布时间还是? （按照编辑时间）
2,用户管理中关闭用户是指账户还是功能? （关闭账户以及功能）
3,用户管理中编辑用户有两个，什么意思? （已经改为一个）

----------------------------------------------------------------------------------
1,GSON解析、渲染性能是否良好,是否传入class?(解决。)
2,RESTful/Spring security?（解决。）

----------------------------------------------------------------------------------
待解决问题:
1,quartz?
2,缓存问题?（暂时使用EHCACHE同步方式。）
3,NOSQL?(使用mongoDB,拜访记录,订单。)
4,Spring security角色匹配算法优化。
5,亚军的DTO问题。（解决。）
6,调整Controller位置。（解决。）
7,图片问题。

----------------------------------------------------------------------------------
修改:
1,mysql中不再保存一个月内订单，而是仅仅保存未完成订单。完成订单转入mongoDB;拜访记录的数据直接放入mongoDB.
2,quartz仅用作统计。


----------------------------------------------------------------------------------
问题：
1,用户的销量统计需要ERP。
2,直营客户和门店的混合拜访问题。（解决。）
3,用户管理的问题：添加账号、岗位调动。
4,业务员获取门店分类，直营店和分销店是否分开。
5,拜访记录同步如何做。
6,需要询问周晓慧：a,经销商是否可关闭，ERP中是否有关闭字段。b,ERP中经销商与主任区的关系是否会调整。c,合区是否会跨主任区进行。
7,可行性：给经销商分配门店似乎不可行。门店太多，web控件是否会有问题？分配操作的操作逻辑？
8,门店最好先不开放注册。等系统稳定再开放。
---------------------------------------------------------------------------------
几种情况：
A,给经销商分配门店，需要如下操作：(需要锁表？)
	1,首先获取所有与经销商关联的CR区。对每个CR区：
		a,清除此CR区所有的与一阶门店的关系。
		b,对于此CR区所有路线的类型为一阶门店的节点进行节点删除操作。
	2,将此经销商与门店的关系置空。
	3,对每个将要加入此经销商的门店进行与CR区的关系置空处理。
	4,对每个将要加入此经销商的门店，任意一条CR路线中的任意一个节点与此门店关联，做节点删除处理。
	5,最后建立此经销商与这些门店之间的关系。
	
	
B,给小区分配经销商，需要如下操作：（需要锁表？）
	1,获取此小区所在的主任区下属的所有经销商,并选定几个经销商分配到此小区。
	2,判断将要分配给此小区的每个经销商所属的主任区是否等于此小区所属的主任区。不等则抛出访问异常。
	3,将此小区与经销商的关系置空。
	4,将此小区与一阶门店的关系置空。
	5,将此小区的所有路线的节点类型为一阶门店的节点删除。
	6,建立此小区与这些经销商之间的关系。
	
C,给小区分配直营店，需要如下操作：（需要锁表？）
	1,获取此小区所在的主任区下属的所有直营店,并选定几个经销商分配到此小区。
	2,将此小区与所有直营店的关系置空。
	3,将此小区所有的路线的每个类型为直营的节点做删除处理。
	2,对每个直营店ID:
		a,判断此直营店是否属于此小区所在的主任区。否则跑出访问异常。
		b,对所有路线的关联此直营店的节点进行节点删除处理。
		b,建立此直营店与此小区的关系。


D,给小区分配一阶门店,需要如下操作：（需要锁表？）
	1,获取此小区所对应的经销商下的所有小店。
	2,将此小区与小店的关系置空，并且将此小区所有的路线的节点类型为小店的节点进行删除操作。
	3,对于每个要加入到此小区的小店：
		a,删除所有与此小店关联的节点。
		b,建立此小店与小区的关系。
		
		
		
------------------------------------------------------------------------------------
1,是否合理利用缓存？

2,有些权限控制是否必要？

-----------------------------------------------------------------------------------
1，注意职位添加时候的约束。
a,一个人只能是一个经理区的文员。
b,一个人只能是一个经理区的经理。

-----------------------------------------------------------------------------------
Exception应当设计的更加简练。
-----------------------------------------------------------------------------------
参数边界检查。
已存在检查。
-----------------------------------------------------------------------------------
完成订单的时候更新账务统计。
乐观锁处理。(修改销量，设定NR目标，修改/添加分类名，修改账务统计。)
同步客户时：处理客户的区域调整。
同步订单时：需要做完成订单的相关操作，比如更新账务。
-----------------------------------------------------------------------------------
解决设置销量目标的死锁问题。


1,关闭主任区，大区，经理区。
2，显示某某区域关闭。
3，区域名改为区域描述，小区添加岗位类型。
4，小区改为辖区。

